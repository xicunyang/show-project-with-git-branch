(()=>{"use strict";var e={26:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function c(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(n=1,i&&(r=2&c[0]?i.return:c[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,c[1])).done)return r;switch(i=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,i=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],i=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=void 0;var o=n(496),a=n(626);global._globalWebview=void 0,t.activate=function(e){return i(this,void 0,void 0,(function(){var t,n;return r(this,(function(i){return t=(0,a.initLeftPanel)(e).disposable,o.window.createWebviewPanel,n=o.commands.registerCommand("extension.openLeftPanel",(function(){o.commands.executeCommand("".concat(a.WebviewKey,".focus")),setTimeout((function(){var e=global._globalWebview;console.log("webview:::",e.webview.postMessage),e.webview.postMessage({type:"SET_FOCUS"})}),200)})),e.subscriptions.push(n),e.subscriptions.push(t),[2]}))}))},t.deactivate=function(){}},626:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function c(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(n=1,i&&(r=2&c[0]?i.return:c[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,c[1])).done)return r;switch(i=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,i=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],i=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.initLeftPanel=t.WebviewKey=void 0;var o=n(496),a=n(81);t.WebviewKey="show-project-with-git-branch-panel-view";var c=function(){return i(void 0,void 0,void 0,(function(){var e,t,n;return r(this,(function(i){switch(i.label){case 0:return[4,o.commands.executeCommand("_workbench.getRecentlyOpened")];case 1:return e=i.sent(),t=e.workspaces,n=t.map((function(e){var t,n,i=(null===(t=null==e?void 0:e.folderUri)||void 0===t?void 0:t.path)||"",r=i.split("/").pop(),o=function(e){var t="";try{t=a.execSync("cd ".concat(e," && git rev-parse --abbrev-ref HEAD")).toString()}catch(e){}return t}(i).replace("\n","");return{name:r,path:(null===(n=null==e?void 0:e.folderUri)||void 0===n?void 0:n.path)||"",branchName:o}})),[2,n]}}))}))};t.initLeftPanel=function(e){return{disposable:o.window.registerWebviewViewProvider(t.WebviewKey,{resolveWebviewView:function(t){return global._globalWebview=t,function(e,t){var n=o.Uri.joinPath(t.extensionUri,"media","main.js"),s=e.webview.asWebviewUri(n);e.webview.options={enableScripts:!0},e.onDidChangeVisibility((function(t){e.visible&&i(void 0,void 0,void 0,(function(){var t;return r(this,(function(n){switch(n.label){case 0:e.webview.postMessage({type:"SEND_LOADING"}),t=[],n.label=1;case 1:return n.trys.push([1,3,,4]),[4,c()];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return e.webview.postMessage({type:"SEND_FRESH_PROJECT_WITH_GIT_BRANCH",items:t}),e.webview.postMessage({type:"SET_FOCUS"}),[2]}}))}))})),e.webview.onDidReceiveMessage((function(t){return i(void 0,void 0,void 0,(function(){var n,i;return r(this,(function(r){switch(r.label){case 0:return"GET_FRESH_PROJECT_WITH_GIT_BRANCH"!==t.type?[3,2]:[4,c()];case 1:n=r.sent(),e.webview.postMessage({type:"SEND_FRESH_PROJECT_WITH_GIT_BRANCH",items:n}),r.label=2;case 2:return"OPEN_PROJECT"===t.type&&(i=t.path)&&function(e){try{a.execSync("code ".concat(e)).toString()}catch(e){}}(i),[2]}}))}))})),e.webview.html='\n    <!DOCTYPE html>\n    <html lang="en">\n      <head>\n        <meta charset="UTF-8" />\n        <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n        <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n        <title></title>\n        <link rel="icon" href="favicon.ico" type="image/x-icon" />\n      </head>\n      <body>\n        <div id="root"></div>\n        <script>\n\n          if (!window._vscode) {\n            window._vscode = acquireVsCodeApi();\n          }\n\n        <\/script>\n        <script src="'.concat(s,'"><\/script>\n      </body>\n    </html>\n  ')}(t,e)}},{webviewOptions:{retainContextWhenHidden:!0}})}}},496:e=>{e.exports=require("vscode")},81:e=>{e.exports=require("child_process")}},t={},n=function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}(26);module.exports=n})();